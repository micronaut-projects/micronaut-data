plugins {
    id "java"
    id "io.micronaut.application"
    id "io.micronaut.build.internal.data-benchmark"
}

dependencies {
    annotationProcessor project(":data-processor")
    annotationProcessor "io.micronaut:micronaut-inject-java"
    runtimeOnly "ch.qos.logback:logback-classic"

    implementation "io.micronaut:micronaut-runtime"
    implementation "io.micronaut.sql:micronaut-jdbc-hikari"
    runtimeOnly "com.h2database:h2"

    testAnnotationProcessor "io.micronaut:micronaut-inject-java"
    testImplementation "io.micronaut.test:micronaut-test-junit5"

    jmh libs.jmh.core
    jmh libs.jmh.annprocess
}

tasks.named("jmh") {
    testRuntimeClasspath.setFrom() // clear test runtime classpath
}

project.afterEvaluate {
    nativeImage.enabled = false
    testNativeImage.enabled = false
}
