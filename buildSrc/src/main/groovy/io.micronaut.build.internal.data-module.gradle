plugins {
    id "io.micronaut.build.internal.data-base"
    id "io.micronaut.build.internal.module"
}

micronautBuild {
    binaryCompatibility {
        // Enable before Micronaut 4 release
        enabled.set(false)
    }
}

dependencies {
    testRuntimeOnly mnSerde.micronaut.serde.jackson
}

def checkModulesOptional = rootProject.tasks.findByName("checkModules")
def checkModules
if (checkModulesOptional) {
    checkModules = checkModulesOptional
} else {
    checkModules = rootProject.tasks.register("checkModules").get()
}

checkModules.dependsOn tasks.named("check")
