plugins {
    id "java"
    id "io.micronaut.application"
    id "io.micronaut.test-resources"
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

tasks.register("testExamples") {
    dependsOn "test"
}

dependencies {
    testRuntimeOnly mnSerde.micronaut.serde.jackson
    runtimeOnly mn.snakeyaml
}

configurations.all {
    resolutionStrategy.preferProjectModules()
}

graalvmNative {
    toolchainDetection = false
    testSupport = true
    metadataRepository {
        enabled = true
    }
}
