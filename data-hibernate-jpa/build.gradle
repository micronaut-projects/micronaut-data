plugins {
    id "io.micronaut.build.internal.data-module"
}

dependencies {
    annotationProcessor mn.micronaut.inject.java
    annotationProcessor mn.micronaut.graal

    api projects.dataRuntime
    api projects.dataModel
    api libs.jakarta.persistence.api
    api libs.hibernate.core
    api projects.dataTxHibernate

    implementation (mnSql.micronaut.hibernate.jpa) {
        exclude group:'io.micronaut', module:'micronaut-spring'
        exclude group:'org.springframework', module:'spring-aop'
        exclude group:'org.springframework', module:'spring-orm'
        exclude group:'org.springframework', module:'spring-jdbc'
        exclude group:'org.springframework', module:'spring-expression'
        exclude group:'org.javassist', module:'javassist'
        exclude group:'io.micronaut.configuration', module:'micronaut-hibernate-validator'
        exclude group:'io.micronaut.configuration', module:'micronaut-hibernate-jpa-spring'
        exclude group: 'io.micronaut.data'
    }

    testAnnotationProcessor mn.micronaut.inject.java
    testAnnotationProcessor projects.dataProcessor
    testAnnotationProcessor mnValidation.micronaut.validation.processor

    testImplementation mn.micronaut.inject.groovy
    testImplementation projects.dataProcessor
    testImplementation mnValidation.micronaut.validation
    testImplementation mnValidation.micronaut.validation.processor
    testImplementation mnRxjava2.micronaut.rxjava2
    testImplementation mnReactor.micronaut.reactor
    testImplementation projects.dataTck
    testImplementation libs.groovy.sql
    testImplementation platform(libs.testcontainers.bom)
    testImplementation libs.testcontainers.postgresql

    testRuntimeOnly mnSql.h2
    testRuntimeOnly libs.drivers.jdbc.postgresql
    testRuntimeOnly mnSql.micronaut.jdbc.tomcat
}
