plugins {
    id "org.jetbrains.kotlin.jvm"
    id "io.micronaut.build.internal.data-module"
}

dependencies {
    annotationProcessor mn.micronaut.inject.java
    annotationProcessor mn.micronaut.graal

    api projects.dataTx
    api mn.micronaut.inject
    api mn.micronaut.validation
    api mn.micronaut.aop

    implementation mn.reactor

    compileOnly libs.jakarta.persistence.api
    compileOnly mn.rxjava2
    compileOnly mn.jackson.annotations
    compileOnly mn.jackson.databind
    compileOnly libs.kotlin.stdlib
    compileOnly libs.kotlin.coroutines

    testImplementation mn.micronaut.inject.java.test
    testImplementation mn.micronaut.jackson.databind
}

tasks.named("compileKotlin") {
    kotlinOptions {
        jvmTarget = '1.8'
    }
}

tasks.named("compileTestKotlin") {
    kotlinOptions {
        jvmTarget = '1.8'
    }
}
