<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>DataSourceTransactionManager (data-parent 4.7.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: io.micronaut.transaction.jdbc, class: DataSourceTransactionManager">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.micronaut.transaction.jdbc</a></div>
<h1 title="Class DataSourceTransactionManager" class="title">Class DataSourceTransactionManager</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="../support/AbstractPropagatedStatusTransactionOperations.html" title="class in io.micronaut.transaction.support">io.micronaut.transaction.support.AbstractPropagatedStatusTransactionOperations</a>&lt;T,<wbr>C&gt;
<div class="inheritance"><a href="../support/AbstractTransactionOperations.html" title="class in io.micronaut.transaction.support">io.micronaut.transaction.support.AbstractTransactionOperations</a>&lt;<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;C&gt;,<wbr>C&gt;
<div class="inheritance"><a href="../support/AbstractDefaultTransactionOperations.html" title="class in io.micronaut.transaction.support">io.micronaut.transaction.support.AbstractDefaultTransactionOperations</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;
<div class="inheritance">io.micronaut.transaction.jdbc.DataSourceTransactionManager</div>
</div>
</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../SynchronousTransactionManager.html" title="interface in io.micronaut.transaction">SynchronousTransactionManager</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;</code>, <code><a href="../TransactionManager.html" title="interface in io.micronaut.transaction">TransactionManager</a></code>, <code><a href="../TransactionOperations.html" title="interface in io.micronaut.transaction">TransactionOperations</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;</code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@Internal
@EachBean(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">javax.sql.DataSource.class</a>)
@Requires(condition=io.micronaut.transaction.jdbc.JdbcTransactionManagerCondition.class)
</span><span class="modifiers">public final class </span><span class="element-name type-name-label">DataSourceTransactionManager</span>
<span class="extends-implements">extends <a href="../support/AbstractDefaultTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractDefaultTransactionOperations</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;</span></div>
<div class="block">The <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link"><code>DataSource</code></a> transaction manager.
 Partially based on https://github.com/spring-projects/spring-framework/blob/main/spring-jdbc/src/main/java/org/springframework/jdbc/datasource/DataSourceTransactionManager.java</div>
<dl class="notes">
<dt>Since:</dt>
<dd>4.0.0</dd>
<dt>Author:</dt>
<dd>Denis Stepanov</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-io.micronaut.transaction.support.AbstractTransactionOperations">Fields inherited from class&nbsp;io.micronaut.transaction.support.<a href="../support/AbstractTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractTransactionOperations</a></h3>
<code><a href="../support/AbstractTransactionOperations.html#connectionOperations">connectionOperations</a>, <a href="../support/AbstractTransactionOperations.html#logger">logger</a>, <a href="../support/AbstractTransactionOperations.html#synchronousConnectionManager">synchronousConnectionManager</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(javax.sql.DataSource,io.micronaut.data.connection.ConnectionOperations,io.micronaut.data.connection.SynchronousConnectionManager)" class="member-name-link">DataSourceTransactionManager</a><wbr>(@NonNull <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;dataSource,
 <a href="../../data/connection/ConnectionOperations.html" title="interface in io.micronaut.data.connection">ConnectionOperations</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;connectionOperations,
 @Nullable <a href="../../data/connection/SynchronousConnectionManager.html" title="interface in io.micronaut.data.connection">SynchronousConnectionManager</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;synchronousConnectionManager)</code></div>
<div class="col-last even-row-color">
<div class="block">Create a new DataSourceTransactionManager instance.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doBegin(io.micronaut.transaction.impl.DefaultTransactionStatus)" class="member-name-link">doBegin</a><wbr>(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Begin a new transaction with semantics according to the given transaction
 definition.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doCommit(io.micronaut.transaction.impl.DefaultTransactionStatus)" class="member-name-link">doCommit</a><wbr>(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Perform an actual commit of the given transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doNestedBegin(io.micronaut.transaction.impl.DefaultTransactionStatus)" class="member-name-link">doNestedBegin</a><wbr>(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Alternative of the <a href="../support/AbstractTransactionOperations.html#doBegin(T)"><code>AbstractTransactionOperations.doBegin(InternalTransaction)</code></a> intended for a nested transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doNestedCommit(io.micronaut.transaction.impl.DefaultTransactionStatus)" class="member-name-link">doNestedCommit</a><wbr>(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Alternative of the <a href="../support/AbstractTransactionOperations.html#doCommit(T)"><code>AbstractTransactionOperations.doCommit(InternalTransaction)</code></a> intended for a nested transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doNestedRollback(io.micronaut.transaction.impl.DefaultTransactionStatus)" class="member-name-link">doNestedRollback</a><wbr>(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Alternative of the <a href="../support/AbstractTransactionOperations.html#doRollback(T)"><code>AbstractTransactionOperations.doRollback(InternalTransaction)</code></a> intended for a nested transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doRollback(io.micronaut.transaction.impl.DefaultTransactionStatus)" class="member-name-link">doRollback</a><wbr>(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Perform an actual rollback of the given transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>@NonNull <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConnection()" class="member-name-link">getConnection</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Obtains the connection for the current transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>@NonNull <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDataSource()" class="member-name-link">getDataSource</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEnforceReadOnly()" class="member-name-link">isEnforceReadOnly</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#prepareTransactionalConnection(java.sql.Connection,io.micronaut.transaction.TransactionDefinition)" class="member-name-link">prepareTransactionalConnection</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;con,
 <a href="../TransactionDefinition.html" title="interface in io.micronaut.transaction">TransactionDefinition</a>&nbsp;definition)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Prepare the transactional <code>Connection</code> right after transaction begin.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setEnforceReadOnly(boolean)" class="member-name-link">setEnforceReadOnly</a><wbr>(boolean&nbsp;enforceReadOnly)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Specify whether to enforce the read-only nature of a transaction
 (as indicated by <a href="../TransactionDefinition.html#isReadOnly()"><code>TransactionDefinition.isReadOnly()</code></a>)
 through an explicit statement on the transactional connection:
 "SET TRANSACTION READ ONLY" as understood by Oracle, MySQL and Postgres.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.micronaut.transaction.support.AbstractDefaultTransactionOperations">Methods inherited from class&nbsp;io.micronaut.transaction.support.<a href="../support/AbstractDefaultTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractDefaultTransactionOperations</a></h3>
<code><a href="../support/AbstractDefaultTransactionOperations.html#createExistingTransactionStatus(io.micronaut.data.connection.ConnectionStatus,io.micronaut.transaction.TransactionDefinition,io.micronaut.transaction.impl.DefaultTransactionStatus)">createExistingTransactionStatus</a>, <a href="../support/AbstractDefaultTransactionOperations.html#createNewTransactionStatus(io.micronaut.data.connection.ConnectionStatus,io.micronaut.transaction.TransactionDefinition)">createNewTransactionStatus</a>, <a href="../support/AbstractDefaultTransactionOperations.html#createNoTxTransactionStatus(io.micronaut.data.connection.ConnectionStatus,io.micronaut.transaction.TransactionDefinition)">createNoTxTransactionStatus</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.micronaut.transaction.support.AbstractTransactionOperations">Methods inherited from class&nbsp;io.micronaut.transaction.support.<a href="../support/AbstractTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractTransactionOperations</a></h3>
<code><a href="../support/AbstractTransactionOperations.html#commit(io.micronaut.transaction.TransactionStatus)">commit</a>, <a href="../support/AbstractTransactionOperations.html#determineTimeout(io.micronaut.transaction.TransactionDefinition)">determineTimeout</a>, <a href="../support/AbstractTransactionOperations.html#doExecute(io.micronaut.transaction.TransactionDefinition,io.micronaut.transaction.TransactionCallback)">doExecute</a>, <a href="../support/AbstractTransactionOperations.html#doResume(T)">doResume</a>, <a href="../support/AbstractTransactionOperations.html#doSuspend(T)">doSuspend</a>, <a href="../support/AbstractTransactionOperations.html#getConnectionDefinition(io.micronaut.transaction.TransactionDefinition)">getConnectionDefinition</a>, <a href="../support/AbstractTransactionOperations.html#getTransaction(io.micronaut.transaction.TransactionDefinition)">getTransaction</a>, <a href="../support/AbstractTransactionOperations.html#hasConnection()">hasConnection</a>, <a href="../support/AbstractTransactionOperations.html#rollback(io.micronaut.transaction.TransactionStatus)">rollback</a>, <a href="../support/AbstractTransactionOperations.html#suspend(T,java.util.function.Supplier)">suspend</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.micronaut.transaction.support.AbstractPropagatedStatusTransactionOperations">Methods inherited from class&nbsp;io.micronaut.transaction.support.<a href="../support/AbstractPropagatedStatusTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractPropagatedStatusTransactionOperations</a></h3>
<code><a href="../support/AbstractPropagatedStatusTransactionOperations.html#execute(io.micronaut.transaction.TransactionDefinition,io.micronaut.transaction.TransactionCallback)">execute</a>, <a href="../support/AbstractPropagatedStatusTransactionOperations.html#extendCurrentPropagatedContext(io.micronaut.transaction.TransactionStatus)">extendCurrentPropagatedContext</a>, <a href="../support/AbstractPropagatedStatusTransactionOperations.html#findTransactionStatus()">findTransactionStatus</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.micronaut.transaction.TransactionOperations">Methods inherited from interface&nbsp;io.micronaut.transaction.<a href="../TransactionOperations.html" title="interface in io.micronaut.transaction">TransactionOperations</a></h3>
<code><a href="../TransactionOperations.html#execute(io.micronaut.transaction.TransactionDefinition,io.micronaut.transaction.TransactionCallback)">execute</a>, <a href="../TransactionOperations.html#executeRead(io.micronaut.transaction.TransactionCallback)">executeRead</a>, <a href="../TransactionOperations.html#executeWrite(io.micronaut.transaction.TransactionCallback)">executeWrite</a>, <a href="../TransactionOperations.html#findTransactionStatus()">findTransactionStatus</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(javax.sql.DataSource,io.micronaut.data.connection.ConnectionOperations,io.micronaut.data.connection.SynchronousConnectionManager)">
<h3>DataSourceTransactionManager</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">DataSourceTransactionManager</span><wbr><span class="parameters">(@NonNull
 @NonNull <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;dataSource,
 @Parameter
 <a href="../../data/connection/ConnectionOperations.html" title="interface in io.micronaut.data.connection">ConnectionOperations</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;connectionOperations,
 @Parameter @Nullable
 @Nullable <a href="../../data/connection/SynchronousConnectionManager.html" title="interface in io.micronaut.data.connection">SynchronousConnectionManager</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;synchronousConnectionManager)</span></div>
<div class="block">Create a new DataSourceTransactionManager instance.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dataSource</code> - the JDBC DataSource to manage transactions for</dd>
<dd><code>connectionOperations</code> - the connection operations</dd>
<dd><code>synchronousConnectionManager</code> - the synchronous connection operations</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getDataSource()">
<h3>getDataSource</h3>
<div class="member-signature"><span class="annotations">@NonNull
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">@NonNull <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></span>&nbsp;<span class="element-name">getDataSource</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Return the JDBC DataSource that this instance manages transactions for.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setEnforceReadOnly(boolean)">
<h3>setEnforceReadOnly</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setEnforceReadOnly</span><wbr><span class="parameters">(boolean&nbsp;enforceReadOnly)</span></div>
<div class="block">Specify whether to enforce the read-only nature of a transaction
 (as indicated by <a href="../TransactionDefinition.html#isReadOnly()"><code>TransactionDefinition.isReadOnly()</code></a>)
 through an explicit statement on the transactional connection:
 "SET TRANSACTION READ ONLY" as understood by Oracle, MySQL and Postgres.
 <p>The exact treatment, including any SQL statement executed on the connection,
 can be customized through <a href="#prepareTransactionalConnection(java.sql.Connection,io.micronaut.transaction.TransactionDefinition)"><code>prepareTransactionalConnection(java.sql.Connection, io.micronaut.transaction.TransactionDefinition)</code></a>.
 <p>This mode of read-only handling goes beyond the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setReadOnly(boolean)" title="class or interface in java.sql" class="external-link"><code>Connection.setReadOnly(boolean)</code></a>
 hint that Spring applies by default. In contrast to that standard JDBC hint,
 "SET TRANSACTION READ ONLY" enforces an isolation-level-like connection mode
 where data manipulation statements are strictly disallowed. Also, on Oracle,
 this read-only mode provides read consistency for the entire transaction.
 <p>Note that older Oracle JDBC drivers (9i, 10g) used to enforce this read-only
 mode even for <code>Connection.setReadOnly(true</code>. However, with recent drivers,
 this strong enforcement needs to be applied explicitly, e.g. through this flag.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>enforceReadOnly</code> - True if read-only should be enforced</dd>
<dt>Since:</dt>
<dd>4.3.7</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#prepareTransactionalConnection(java.sql.Connection,io.micronaut.transaction.TransactionDefinition)"><code>prepareTransactionalConnection(java.sql.Connection, io.micronaut.transaction.TransactionDefinition)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isEnforceReadOnly()">
<h3>isEnforceReadOnly</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEnforceReadOnly</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Return whether to enforce the read-only nature of a transaction
 through an explicit statement on the transactional connection.</dd>
<dt>Since:</dt>
<dd>4.3.7</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#setEnforceReadOnly(boolean)"><code>setEnforceReadOnly(boolean)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doBegin(io.micronaut.transaction.impl.DefaultTransactionStatus)">
<h3>doBegin</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doBegin</span><wbr><span class="parameters">(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../support/AbstractTransactionOperations.html#doBegin(T)">AbstractTransactionOperations</a></code></span></div>
<div class="block">Begin a new transaction with semantics according to the given transaction
 definition. Does not have to care about applying the propagation behavior,
 as this has already been handled by this abstract manager.
 <p>This method gets called when the transaction manager has decided to actually
 start a new transaction. Either there wasn't any transaction before, or the
 previous transaction has been suspended.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../support/AbstractTransactionOperations.html#doBegin(T)">doBegin</a></code>&nbsp;in class&nbsp;<code><a href="../support/AbstractTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractTransactionOperations</a>&lt;<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>status</code> - The transaction</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doCommit(io.micronaut.transaction.impl.DefaultTransactionStatus)">
<h3>doCommit</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doCommit</span><wbr><span class="parameters">(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../support/AbstractTransactionOperations.html#doCommit(T)">AbstractTransactionOperations</a></code></span></div>
<div class="block">Perform an actual commit of the given transaction.
 <p>An implementation does not need to check the "new transaction" flag
 or the rollback-only flag; this will already have been handled before.
 Usually, a straight commit will be performed on the transaction object
 contained in the passed-in status.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../support/AbstractTransactionOperations.html#doCommit(T)">doCommit</a></code>&nbsp;in class&nbsp;<code><a href="../support/AbstractTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractTransactionOperations</a>&lt;<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>status</code> - The transaction</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doRollback(io.micronaut.transaction.impl.DefaultTransactionStatus)">
<h3>doRollback</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doRollback</span><wbr><span class="parameters">(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../support/AbstractTransactionOperations.html#doRollback(T)">AbstractTransactionOperations</a></code></span></div>
<div class="block">Perform an actual rollback of the given transaction.
 <p>An implementation does not need to check the "new transaction" flag;
 this will already have been handled before. Usually, a straight rollback
 will be performed on the transaction object contained in the passed-in status.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../support/AbstractTransactionOperations.html#doRollback(T)">doRollback</a></code>&nbsp;in class&nbsp;<code><a href="../support/AbstractTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractTransactionOperations</a>&lt;<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>status</code> - The transaction</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doNestedBegin(io.micronaut.transaction.impl.DefaultTransactionStatus)">
<h3>doNestedBegin</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doNestedBegin</span><wbr><span class="parameters">(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../support/AbstractTransactionOperations.html#doNestedBegin(T)">AbstractTransactionOperations</a></code></span></div>
<div class="block">Alternative of the <a href="../support/AbstractTransactionOperations.html#doBegin(T)"><code>AbstractTransactionOperations.doBegin(InternalTransaction)</code></a> intended for a nested transaction.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../support/AbstractTransactionOperations.html#doNestedBegin(T)">doNestedBegin</a></code>&nbsp;in class&nbsp;<code><a href="../support/AbstractTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractTransactionOperations</a>&lt;<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>status</code> - The transaction</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doNestedCommit(io.micronaut.transaction.impl.DefaultTransactionStatus)">
<h3>doNestedCommit</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doNestedCommit</span><wbr><span class="parameters">(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../support/AbstractTransactionOperations.html#doNestedCommit(T)">AbstractTransactionOperations</a></code></span></div>
<div class="block">Alternative of the <a href="../support/AbstractTransactionOperations.html#doCommit(T)"><code>AbstractTransactionOperations.doCommit(InternalTransaction)</code></a> intended for a nested transaction.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../support/AbstractTransactionOperations.html#doNestedCommit(T)">doNestedCommit</a></code>&nbsp;in class&nbsp;<code><a href="../support/AbstractTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractTransactionOperations</a>&lt;<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>status</code> - The transaction</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doNestedRollback(io.micronaut.transaction.impl.DefaultTransactionStatus)">
<h3>doNestedRollback</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doNestedRollback</span><wbr><span class="parameters">(<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;&nbsp;status)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../support/AbstractTransactionOperations.html#doNestedRollback(T)">AbstractTransactionOperations</a></code></span></div>
<div class="block">Alternative of the <a href="../support/AbstractTransactionOperations.html#doRollback(T)"><code>AbstractTransactionOperations.doRollback(InternalTransaction)</code></a> intended for a nested transaction.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../support/AbstractTransactionOperations.html#doNestedRollback(T)">doNestedRollback</a></code>&nbsp;in class&nbsp;<code><a href="../support/AbstractTransactionOperations.html" title="class in io.micronaut.transaction.support">AbstractTransactionOperations</a>&lt;<a href="../impl/DefaultTransactionStatus.html" title="class in io.micronaut.transaction.impl">DefaultTransactionStatus</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>status</code> - The transaction</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareTransactionalConnection(java.sql.Connection,io.micronaut.transaction.TransactionDefinition)">
<h3>prepareTransactionalConnection</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">prepareTransactionalConnection</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;con,
 <a href="../TransactionDefinition.html" title="interface in io.micronaut.transaction">TransactionDefinition</a>&nbsp;definition)</span>
                                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Prepare the transactional <code>Connection</code> right after transaction begin.
 <p>The default implementation executes a "SET TRANSACTION READ ONLY" statement
 if the <a href="#setEnforceReadOnly(boolean)"><code>"enforceReadOnly"</code></a> flag is set to <code>true</code>
 and the transaction definition indicates a read-only transaction.
 <p>The "SET TRANSACTION READ ONLY" is understood by Oracle, MySQL and Postgres
 and may work with other databases as well. If you'd like to adapt this treatment,
 override this method accordingly.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>con</code> - the transactional JDBC Connection</dd>
<dd><code>definition</code> - the current transaction definition</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if thrown by JDBC API</dd>
<dt>Since:</dt>
<dd>4.3.7</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#setEnforceReadOnly(boolean)"><code>setEnforceReadOnly(boolean)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getConnection()">
<h3>getConnection</h3>
<div class="member-signature"><span class="annotations">@NonNull
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">@NonNull <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></span>&nbsp;<span class="element-name">getConnection</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../TransactionOperations.html#getConnection()">TransactionOperations</a></code></span></div>
<div class="block">Obtains the connection for the current transaction.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The connection</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
